{
  "metadata": {
    "timestamp": "2025-09-27T08:40:25.264118",
    "total_duration": 385.800109,
    "python_version": "3.13.2",
    "platform": "win32"
  },
  "statistics": {
    "total_tests": 6,
    "passed_tests": 6,
    "failed_tests": 0,
    "error_tests": 0,
    "timeout_tests": 0,
    "total_successes": 155,
    "total_errors": 0,
    "success_rate": 100.0,
    "assertion_success_rate": 100.0,
    "average_test_duration": 64.30001816666667,
    "fastest_test": "02.test-create-local-db",
    "slowest_test": "06.test-webhook-alerts"
  },
  "results": [
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\01.test-models-with-db-máº«u.py",
      "name": "01.test-models-with-db-máº«u",
      "status": "PASSED",
      "successes": 85,
      "errors": 0,
      "duration": 1.0,
      "start_time": "2025-09-27 08:34:04",
      "end_time": "2025-09-27 08:34:05",
      "summary": "================================================================================\nâœ… Successes: 85\nâš ï¸ Warnings:  1\nâŒ Errors:    0",
      "error_messages": [
        "âŒ Errors:    0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ”— Database: MYSQL on 12.0.0.54:3306/glx_monitor_v2\nğŸš€ Starting Model-Database Compatibility Test...\nğŸ§ª MODEL-DATABASE COMPATIBILITY TEST\nğŸ•’ Test started at: 2025-09-27 08:34:04\n================================================================================\n\n======================================================================\nTEST 1: DATABASE CONNECTION\n======================================================================\nâœ… Database connection successful\nâœ… Database version: 10.6.22-MariaDB-0ubuntu0.22.04.1-log\n\n======================================================================\nTEST 2: TABLE EXISTENCE\n======================================================================\nğŸ“‹ Expected tables: ['monitor_items', 'monitor_configs', 'monitor_and_configs', 'monitor_settings', 'users']\nğŸ“‹ Database tables: ['affiliate_logs', 'asset_categories', 'assets', 'block_uis', 'cache_key_value', 'cache_key_values', 'cart_items', 'carts', 'categories', 'change_logs', 'cloud_group', 'cloud_servers', 'cloud_transfer', 'conference_cats', 'conference_infos', 'cost_items', 'crm_app_infos', 'crm_message_groups', 'crm_messages', 'demo_and_tag_tbls', 'demo_folder_tbls', 'demo_sub1s', 'demo_tbls', 'department_events', 'department_users', 'departments', 'don_vi_hanh_chinhs', 'download_logs', 'event_and_users', 'event_face_infos', 'event_infos', 'event_registers', 'event_send_actions', 'event_send_email_logs', 'event_send_info_logs', 'event_send_sms_logs', 'event_settings', 'event_user_groups', 'event_user_infos', 'event_user_payments', 'face_data', 'file_clouds', 'file_refers', 'file_share_permissions', 'file_uploads', 'folder_files', 'gia_pha_users', 'gia_phas', 'log_users', 'media_actors', 'media_authors', 'media_cats', 'media_folders', 'media_items', 'media_links', 'media_vendors', 'members_members', 'menu_trees', 'menus', 'migrations', 'model_meta_infos', 'money_and_tags', 'money_logs', 'money_tags', 'monitor_and_configs', 'monitor_configs', 'monitor_items', 'monitor_settings', 'my_document_cats', 'my_documents', 'my_tree_infos', 'network_marketings', 'news', 'news_folders', 'notifications', 'ocr_images', 'order_infos', 'order_items', 'order_ships', 'partner_infos', 'pay_moneylogs', 'payments', 'permission_role', 'permissions', 'personal_access_tokens', 'plan_define_values', 'plan_defines', 'plan_names', 'product_attributes', 'product_folders', 'product_images', 'product_tags', 'product_usages', 'product_variant_options', 'product_variants', 'products', 'quiz_choices', 'quiz_classes', 'quiz_flash_cards', 'quiz_folders', 'quiz_questions', 'quiz_session_info_tests', 'quiz_test_questions', 'quiz_tests', 'quiz_user_and_tests', 'quiz_user_answers', 'quiz_user_classes', 'rand_table', 'role_user', 'roles', 'site_mngs', 'skus', 'skus_product_variant_options', 'spendings', 'tag_demos', 'tags', 'task_infos', 'telesales', 'telescope_entries', 'telescope_entries_tags', 'telescope_monitoring', 'test_mongo1s', 'tmp_download_sessions', 'todo2s', 'transport_infos', 'tree_mng_col_fixes', 'typing_lessons', 'typing_test_results', 'uploader_infos', 'user_clouds', 'user_groups', 'users', 'zalo_messages']\nâœ… Table 'monitor_items' exists\nâœ… Table 'monitor_configs' exists\nâœ… Table 'monitor_and_configs' exists\nâœ… Table 'monitor_settings' exists\nâœ… Table 'users' exists\nâš ï¸ Extra tables in database (not in models): ['file_refers', 'tag_demos', 'media_folders', 'quiz_user_answers', 'quiz_test_questions', 'quiz_user_classes', 'roles', 'plan_names', 'product_variants', 'tags', 'news', 'network_marketings', 'permissions', 'face_data', 'event_settings', 'quiz_questions', 'event_send_email_logs', 'quiz_classes', 'gia_pha_users', 'order_infos', 'departments', 'quiz_flash_cards', 'conference_infos', 'role_user', 'event_send_sms_logs', 'categories', 'quiz_session_info_tests', 'media_vendors', 'user_clouds', 'demo_folder_tbls', 'plan_define_values', 'product_attributes', 'log_users', 'cloud_group', 'event_user_groups', 'asset_categories', 'order_items', 'partner_infos', 'event_user_payments', 'test_mongo1s', 'affiliate_logs', 'tree_mng_col_fixes', 'skus', 'money_logs', 'event_and_users', 'my_documents', 'transport_infos', 'carts', 'money_and_tags', 'cache_key_values', 'product_variant_options', 'department_users', 'telescope_monitoring', 'product_usages', 'demo_tbls', 'media_actors', 'my_document_cats', 'members_members', 'conference_cats', 'todo2s', 'plan_defines', 'task_infos', 'typing_lessons', 'don_vi_hanh_chinhs', 'quiz_choices', 'zalo_messages', 'file_share_permissions', 'crm_app_infos', 'order_ships', 'event_infos', 'demo_sub1s', 'department_events', 'product_tags', 'download_logs', 'gia_phas', 'telesales', 'event_send_info_logs', 'site_mngs', 'permission_role', 'file_uploads', 'telescope_entries', 'crm_messages', 'event_registers', 'telescope_entries_tags', 'change_logs', 'quiz_tests', 'my_tree_infos', 'cost_items', 'cloud_servers', 'pay_moneylogs', 'cache_key_value', 'media_links', 'ocr_images', 'migrations', 'spendings', 'block_uis', 'news_folders', 'demo_and_tag_tbls', 'menus', 'tmp_download_sessions', 'menu_trees', 'money_tags', 'product_images', 'model_meta_infos', 'typing_test_results', 'personal_access_tokens', 'cloud_transfer', 'quiz_folders', 'cart_items', 'event_user_infos', 'payments', 'quiz_user_and_tests', 'media_cats', 'notifications', 'file_clouds', 'media_items', 'uploader_infos', 'rand_table', 'event_face_infos', 'crm_message_groups', 'product_folders', 'event_send_actions', 'media_authors', 'user_groups', 'folder_files', 'assets', 'skus_product_variant_options', 'products']\n\n======================================================================\nTEST 3-5: DETAILED TABLE ANALYSIS\n======================================================================\n\nğŸ” Testing table: monitor_items (MonitorItem)\n--------------------------------------------------\n\n--- Testing table: monitor_items ---\nğŸ“Š Model has 22 columns, DB has 22 columns\nâœ…   Column 'id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'name': VARCHAR(255) â†” VARCHAR(255)\n    âœ“ nullable: True\nâœ…   Column 'enable': INTEGER â†” TINYINT\n    âœ“ nullable: True\nâœ…   Column 'last_check_status': INTEGER â†” SMALLINT\n    âœ“ nullable: True\nâœ…   Column 'url_check': VARCHAR(500) â†” VARCHAR(500)\n    âœ“ nullable: True\nâœ…   Column 'type': VARCHAR(64) â†” VARCHAR(32)\n    âœ“ nullable: True\nâœ…   Column 'maxAlertCount': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'user_id': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'created_at': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'deleted_at': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'updated_at': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'check_interval_seconds': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'result_valid': VARCHAR(1024) â†” VARCHAR(1024)\n    âœ“ nullable: True\nâœ…   Column 'result_error': VARCHAR(1024) â†” VARCHAR(1024)\n    âœ“ nullable: True\nâœ…   Column 'stopTo': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'pingType': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'log': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Column 'last_check_time': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'queuedSendStr': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Column 'forceRestart': BOOLEAN â†” TINYINT\n    âœ“ nullable: True\nâœ…   Column 'count_online': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'count_offline': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Primary key MATCH: ['id']\nâœ…   Sample data: 10 rows found\n    ğŸ“„ Sample row: {'id': 6, 'name': 'Check SSL Test', 'enable': 1, 'last_check_status': 1, 'url_check': 'https://sale.galaxycloud.vn', 'type': 'ssl_expired_check', 'maxAlertCount': None, 'user_id': 1, 'created_at': datetime.datetime(2025, 9, 8, 7, 1, 59), 'deleted_at': None, 'updated_at': datetime.datetime(2025, 9, 27, 7, 10, 26), 'check_interval_seconds': 21600, 'result_valid': 'SSL certificate valid, expires in 8 days', 'result_error': None, 'stopTo': None, 'pingType': 1, 'log': None, 'last_check_time': datetime.datetime(2025, 9, 27, 7, 10, 26), 'queuedSendStr': None, 'forceRestart': 0, 'count_online': 157, 'count_offline': 249}\n\nğŸ” Testing table: monitor_configs (MonitorConfig)\n--------------------------------------------------\n\n--- Testing table: monitor_configs ---\nğŸ“Š Model has 11 columns, DB has 11 columns\nâœ…   Column 'id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'name': VARCHAR(128) â†” VARCHAR(128)\n    âœ“ nullable: False\nâœ…   Column 'user_id': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'status': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'created_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'updated_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'deleted_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'image_list': VARCHAR(255) â†” VARCHAR(256)\n    âœ“ nullable: True\nâœ…   Column 'log': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Column 'alert_type': VARCHAR(64) â†” VARCHAR(64)\n    âœ“ nullable: True\nâœ…   Column 'alert_config': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Primary key MATCH: ['id']\nâœ…   Sample data: 4 rows found\n    ğŸ“„ Sample row: {'id': 1, 'name': 'Telegram LAD', 'user_id': 1, 'status': 1, 'created_at': datetime.datetime(2025, 9, 7, 7, 32, 30), 'updated_at': datetime.datetime(2025, 9, 8, 16, 43, 40), 'deleted_at': None, 'image_list': None, 'log': None, 'alert_type': 'telegram', 'alert_config': '8040174107:AAE-XqU-XaV0Y7v30pjZgbfGzHq88LQx0HQ,-4878499254'}\n\nğŸ” Testing table: monitor_and_configs (MonitorAndConfig)\n--------------------------------------------------\n\n--- Testing table: monitor_and_configs ---\nğŸ“Š Model has 5 columns, DB has 5 columns\nâœ…   Column 'id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'monitor_item_id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'config_id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'created_at': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Column 'updated_at': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Primary key MATCH: ['id']\nâœ…   Sample data: 11 rows found\n    ğŸ“„ Sample row: {'id': 57, 'monitor_item_id': 10, 'config_id': 3, 'created_at': datetime.datetime(2025, 9, 8, 13, 10, 52), 'updated_at': datetime.datetime(2025, 9, 8, 13, 10, 52)}\n\nğŸ” Testing table: monitor_settings (MonitorSettings)\n--------------------------------------------------\n\n--- Testing table: monitor_settings ---\nğŸ“Š Model has 10 columns, DB has 10 columns\nâœ…   Column 'id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'user_id': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'status': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'created_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'updated_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'deleted_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'log': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Column 'alert_time_ranges': VARCHAR(64) â†” VARCHAR(64)\n    âœ“ nullable: True\nâœ…   Column 'timezone': INTEGER â†” SMALLINT\n    âœ“ nullable: True\nâœ…   Column 'global_stop_alert_to': DATETIME â†” DATETIME\n    âœ“ nullable: True\nâœ…   Primary key MATCH: ['id']\nâœ…   Sample data: 3 rows found\n    ğŸ“„ Sample row: {'id': 7, 'user_id': 1, 'status': 1, 'created_at': datetime.datetime(2025, 9, 9, 22, 24, 58), 'updated_at': datetime.datetime(2025, 9, 20, 6, 47, 40), 'deleted_at': None, 'log': None, 'alert_time_ranges': '06:50-23:30', 'timezone': 7, 'global_stop_alert_to': None}\n\nğŸ” Testing table: users (User)\n--------------------------------------------------\n\n--- Testing table: users ---\nğŸ“Š Model has 20 columns, DB has 20 columns\nâœ…   Column 'id': INTEGER â†” BIGINT\n    âœ“ nullable: False\nâœ…   Column 'old_id': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'id__': VARCHAR(255) â†” VARCHAR(32)\n    âœ“ nullable: True\nâœ…   Column 'username': VARCHAR(255) â†” VARCHAR(255)\n    âœ“ nullable: True\nâœ…   Column 'password': VARCHAR(255) â†” VARCHAR(255)\n    âœ“ nullable: True\nâœ…   Column 'email': VARCHAR(255) â†” VARCHAR(255)\n    âœ“ nullable: False\nâœ…   Column 'phone_number': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'created_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'updated_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'is_admin': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'deleted_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'token_user': VARCHAR(255) â†” VARCHAR(255)\n    âœ“ nullable: True\nâœ…   Column 'site_id': INTEGER â†” BIGINT\n    âœ“ nullable: True\nâœ…   Column 'name': VARCHAR(255) â†” VARCHAR(128)\n    âœ“ nullable: True\nâœ…   Column 'remember_token': VARCHAR(100) â†” VARCHAR(100)\n    âœ“ nullable: True\nâœ…   Column 'email_active_at': DATETIME â†” TIMESTAMP\n    âœ“ nullable: True\nâœ…   Column 'reg_str': VARCHAR(256) â†” VARCHAR(256)\n    âœ“ nullable: True\nâœ…   Column 'log': TEXT â†” TEXT\n    âœ“ nullable: True\nâœ…   Column 'reset_pw': VARCHAR(255) â†” VARCHAR(128)\n    âœ“ nullable: True\nâœ…   Column 'avatar': VARCHAR(128) â†” VARCHAR(128)\n    âœ“ nullable: True\nâœ…   Primary key MATCH: ['id']\nâœ…   Sample data: 3 rows found\n    ğŸ“„ Sample row: {'id': 1, 'old_id': None, 'id__': 'jf155074', 'username': 'dungla2011_gmail_com', 'password': None, 'email': 'dungla2011@gmail.com', 'phone_number': None, 'created_at': datetime.datetime(2025, 9, 6, 13, 10, 55), 'updated_at': datetime.datetime(2025, 9, 6, 13, 10, 55), 'is_admin': 1, 'deleted_at': None, 'token_user': None, 'site_id': 0, 'name': None, 'remember_token': None, 'email_active_at': datetime.datetime(2025, 9, 6, 13, 10, 55), 'reg_str': None, 'log': '\\n#2025-09-06 13:10:55#update new id__ jf155074', 'reset_pw': None, 'avatar': None}\n\n================================================================================\nğŸ“Š TEST SUMMARY\n================================================================================\nâœ… Successes: 85\nâš ï¸ Warnings:  1\nâŒ Errors:    0\n\nâš ï¸ WARNINGS (1):\n   1. Extra tables in database (not in models): ['file_refers', 'tag_demos', 'media_folders', 'quiz_user_answers', 'quiz_test_questions', 'quiz_user_classes', 'roles', 'plan_names', 'product_variants', 'tags', 'news', 'network_marketings', 'permissions', 'face_data', 'event_settings', 'quiz_questions', 'event_send_email_logs', 'quiz_classes', 'gia_pha_users', 'order_infos', 'departments', 'quiz_flash_cards', 'conference_infos', 'role_user', 'event_send_sms_logs', 'categories', 'quiz_session_info_tests', 'media_vendors', 'user_clouds', 'demo_folder_tbls', 'plan_define_values', 'product_attributes', 'log_users', 'cloud_group', 'event_user_groups', 'asset_categories', 'order_items', 'partner_infos', 'event_user_payments', 'test_mongo1s', 'affiliate_logs', 'tree_mng_col_fixes', 'skus', 'money_logs', 'event_and_users', 'my_documents', 'transport_infos', 'carts', 'money_and_tags', 'cache_key_values', 'product_variant_options', 'department_users', 'telescope_monitoring', 'product_usages', 'demo_tbls', 'media_actors', 'my_document_cats', 'members_members', 'conference_cats', 'todo2s', 'plan_defines', 'task_infos', 'typing_lessons', 'don_vi_hanh_chinhs', 'quiz_choices', 'zalo_messages', 'file_share_permissions', 'crm_app_infos', 'order_ships', 'event_infos', 'demo_sub1s', 'department_events', 'product_tags', 'download_logs', 'gia_phas', 'telesales', 'event_send_info_logs', 'site_mngs', 'permission_role', 'file_uploads', 'telescope_entries', 'crm_messages', 'event_registers', 'telescope_entries_tags', 'change_logs', 'quiz_tests', 'my_tree_infos', 'cost_items', 'cloud_servers', 'pay_moneylogs', 'cache_key_value', 'media_links', 'ocr_images', 'migrations', 'spendings', 'block_uis', 'news_folders', 'demo_and_tag_tbls', 'menus', 'tmp_download_sessions', 'menu_trees', 'money_tags', 'product_images', 'model_meta_infos', 'typing_test_results', 'personal_access_tokens', 'cloud_transfer', 'quiz_folders', 'cart_items', 'event_user_infos', 'payments', 'quiz_user_and_tests', 'media_cats', 'notifications', 'file_clouds', 'media_items', 'uploader_infos', 'rand_table', 'event_face_infos', 'crm_message_groups', 'product_folders', 'event_send_actions', 'media_authors', 'user_groups', 'folder_files', 'assets', 'skus_product_variant_options', 'products']\n\n================================================================================\nğŸ‰ ALL CRITICAL TESTS PASSED!\nğŸ’¡ Models are compatible with database schema.\nğŸ“ Note: There are some warnings above - please review them.\nğŸ•’ Test completed at: 2025-09-27 08:34:05\n\nğŸ Test finished with exit code: 0\n"
    },
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\02.test-create-local-db.py",
      "name": "02.test-create-local-db",
      "status": "PASSED",
      "successes": 24,
      "errors": 0,
      "duration": 0.29,
      "start_time": "2025-09-27 08:34:08",
      "end_time": "2025-09-27 08:34:08",
      "summary": "================================================================================\nâœ… Successes: 24\nâš ï¸ Warnings:  0\nâŒ Errors:    0",
      "error_messages": [
        "âŒ Errors:    0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ”— Database: MYSQL on 12.0.0.54:3306/glx_monitor_v2\nğŸš€ Starting Local Database Creation Test...\nğŸ•’ Test started at: 2025-09-27 08:34:08\nğŸ§ª Starting Local Database Creation Test, connection string: mysql+pymysql://root:@localhost:3306/monitor_test\nğŸ§ª LOCAL DATABASE CREATION TEST\nğŸ•’ Test started at: 2025-09-27 08:34:08\n================================================================================\n\n======================================================================\nTEST 1: MYSQL LOCAL CONNECTION\n======================================================================\nâœ… MySQL connection successful\nâœ… MySQL version: 10.4.32-MariaDB\nâœ… Connected as: root@localhost\n\n======================================================================\nTEST 2: CREATE DATABASE\n======================================================================\nâœ… Dropped existing database 'monitor_test' (if existed)\nâœ… Created database 'monitor_test'\nâœ… Database 'monitor_test' verified\n\n======================================================================\nTEST 3: CREATE TABLES FROM MODELS\n======================================================================\nâœ… All tables created from SQLAlchemy models\nğŸ“‹ Expected tables: ['monitor_items', 'monitor_configs', 'monitor_and_configs', 'monitor_settings', 'users']\nğŸ“‹ Created tables: ['monitor_and_configs', 'monitor_configs', 'monitor_items', 'monitor_settings', 'users']\nâœ… Table 'monitor_items' created successfully\nâœ… Table 'monitor_configs' created successfully\nâœ… Table 'monitor_and_configs' created successfully\nâœ… Table 'monitor_settings' created successfully\nâœ… Table 'users' created successfully\n\n======================================================================\nTEST 4: INSERT SAMPLE DATA\n======================================================================\nğŸ“ Inserting sample users...\nâœ… Inserted 2 sample users\nğŸ“ Inserting sample monitor settings...\nâœ… Inserted 2 sample monitor settings\nğŸ“ Inserting sample monitor configs...\nâœ… Inserted 3 sample monitor configs\nğŸ“ Inserting sample monitor items...\nâœ… Inserted 5 sample monitor items\nğŸ“ Inserting sample monitor-config relationships...\nâœ… Inserted 6 monitor-config relationships\n\n======================================================================\nTEST 5: VERIFY DATA INTEGRITY\n======================================================================\nâœ… Table 'users': 2 records\nâœ… Table 'monitor_settings': 2 records\nâœ… Table 'monitor_configs': 3 records\nâœ… Table 'monitor_items': 5 records\nâœ… Table 'monitor_and_configs': 6 records\n\nğŸ“Š Testing data relationships:\n   ğŸ“Œ 'Google DNS Check' â†’ 'Local Telegram Test' (telegram)\n   ğŸ“Œ 'Google DNS Check' â†’ 'Local Webhook Test' (webhook)\n   ğŸ“Œ 'Google Website Check' â†’ 'Local Telegram Test' (telegram)\n   ğŸ“Œ 'Local Web Server' â†’ 'Email Alert Test' (email)\n   ğŸ“Œ 'SSL Certificate Check' â†’ 'Local Telegram Test' (telegram)\nâœ… Found 5 monitor-config relationships\n   ğŸ‘¤ 'admin_user' (admin@localhost.com) - Alert time: 06:00-23:00\n   ğŸ‘¤ 'test_user' (test@localhost.com) - Alert time: 08:00-22:00\nâœ… Verified 2 users and their settings\n\n================================================================================\nğŸ“Š TEST SUMMARY\n================================================================================\nâœ… Successes: 24\nâš ï¸ Warnings:  0\nâŒ Errors:    0\n\n================================================================================\nğŸ‰ ALL TESTS PASSED!\nğŸ’¾ Local database 'monitor_test' created successfully\nğŸ”— Connection string: mysql+pymysql://root:@localhost:3306/monitor_test\nğŸ“Š 5 tables created with sample data\n\nğŸš€ Ready for local development and testing!\n\nğŸ“ Next steps:\n   1. Update .env.test with local database settings\n   2. Test monitor service with --test flag\n   3. Verify API endpoints work with local data\nğŸ•’ Test completed at: 2025-09-27 08:34:08\nğŸ•’ Test completed at: 2025-09-27 08:34:08\nâ±ï¸  Test duration: 0.29 seconds\nğŸ Test finished with exit code: 0\n"
    },
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\03.test-api-endpoints-create-new-console-ok.py",
      "name": "03.test-api-endpoints-create-new-console-ok",
      "status": "PASSED",
      "successes": 10,
      "errors": 0,
      "duration": 34.0,
      "start_time": "2025-09-27 08:34:10",
      "end_time": "2025-09-27 08:34:44",
      "summary": "================================================================================\nâœ… Successes: 10\nâŒ Errors: 0",
      "error_messages": [
        "âŒ Errors: 0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ§ª API ENDPOINTS TEST WITH AUTHENTICATION\nğŸ” Credentials: admin / test123\nğŸ•’ Test started at: 2025-09-27 08:34:10\n================================================================================\nğŸš€ Starting API server...\n   ğŸ“‹ Executing: python monitor_service.py start --test\n   â±ï¸ Waiting 5 seconds for server startup...\n   ğŸ” Testing server response...\nâœ… API server started successfully\n\n============================================================\nTESTING AUTHENTICATION\n============================================================\n\nğŸ”’ Testing without authentication (should fail):\nâœ… Properly requires authentication\n\nğŸ”’ Testing wrong credentials:\nâœ… Properly rejects wrong credentials\n\nğŸ”’ Testing correct credentials:\nâœ… Accepts correct credentials\n   âœ… Response: running\n\n============================================================\nTESTING API ENDPOINTS WITH AUTHENTICATION\n============================================================\nğŸ”‘ Getting Bearer token...\nâœ… Bearer token obtained\n\nğŸ“¡ Testing: System Status\n   GET http://localhost:5006/api/status\n   Status: 200\nâœ… System Status: OK\n   ğŸ“Š Threads: 4 active\n\nğŸ“¡ Testing: Monitor List\n   GET http://localhost:5006/api/monitors\n   Status: 200\nâœ… Monitor List: OK\n   ğŸ“Š Monitors: 4 items\n\nğŸ“¡ Testing: Thread Status\n   GET http://localhost:5006/api/threads\n   Status: 200\nâœ… Thread Status: OK\n   ğŸ“Š Threads: 4 active\n\nğŸ“¡ Testing: Recent Logs\n   GET http://localhost:5006/api/logs\n   Status: 200\nâœ… Recent Logs: OK\n   ğŸ“Š Logs: 50 lines\n\nğŸ“¡ Testing: Dashboard Home\n   GET http://localhost:5006/\n   Status: 200\nâœ… Dashboard Home: OK\n   ğŸ“Š HTML: 9476 bytes\n\nğŸ›‘ Stopping API server...\nâœ… API server stopped\n\n================================================================================\nğŸ“Š TEST SUMMARY\n================================================================================\nâœ… Successes: 10\nâŒ Errors: 0\n\nğŸ‰ ALL API TESTS PASSED!\nğŸ•’ Test completed at: 2025-09-27 08:34:44\n"
    },
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\05.test-enable-disable.py",
      "name": "05.test-enable-disable",
      "status": "PASSED",
      "successes": 7,
      "errors": 0,
      "duration": 53.59,
      "start_time": "2025-09-27 08:34:45",
      "end_time": "2025-09-27 08:35:39",
      "summary": "================================================================================\nâœ… Successes: 7\nâŒ Errors: 0",
      "error_messages": [
        "âŒ Errors: 0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ§ª Starting Dynamic Monitor Control Test...\nğŸ•’ Test started at: 2025-09-27 08:34:45\nğŸ§ª DYNAMIC MONITOR CONTROL TEST\nğŸ”„ Testing real-time enable/disable functionality\nğŸ•’ Test started at: 2025-09-27 08:34:45\n================================================================================\nğŸš€ Starting monitor service...\n   ğŸ“‹ Executing: python monitor_service.py start --test\n   â±ï¸ Waiting 8 seconds for server startup...\nâœ… Monitor service started successfully\n\n======================================================================\nğŸ”„ DYNAMIC MONITOR CONTROL TEST\n======================================================================\nğŸ“‹ Step 1: Getting initial system state...\n   ğŸ” DEBUG: Monitors API response: {'monitors': [{'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 1, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:52', 'last_status': 1, 'name': 'Google DNS Check', 'stop_to': 'stopTo', 'time_range_seconds': 300, 'type': 'ping_icmp', 'url_check': '8.8.8.8', 'user_id': 1}, {'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 2, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:54', 'last_status': 1, 'name': 'Google Website Check', 'stop_to': 'stopTo', 'time_range_seconds': 600, 'type': 'ping_web', 'url_check': 'https://google.com', 'user_id': 1}, {'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 4, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:52', 'last_status': 1, 'name': 'SSL Certificate Check', 'stop_to': 'stopTo', 'time_range_seconds': 86400, 'type': 'ssl_expired_check', 'url_check': 'https://github.com', 'user_id': 1}, {'consecutive_errors': 1, 'count_offline': 2, 'count_online': 0, 'enabled': True, 'id': 5, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:59', 'last_status': -1, 'name': 'Web Content Check', 'stop_to': 'stopTo', 'time_range_seconds': 1800, 'type': 'web_content', 'url_check': 'https://httpbin.org/get', 'user_id': 2}], 'timestamp': '2025-09-27T08:35:01.914424', 'total': 4}\nğŸ“‹ Initial state:\nğŸ“‹   ğŸ“Š Active threads: 4\nğŸ“‹   ğŸ“Š Total monitors: 4\nğŸ“‹ ğŸ¯ Testing with: Google DNS Check (ID: 1)\nğŸ“‹ \nStep 2: Disabling monitor 1...\nğŸ“‹ Database: Monitor 1 disabled\nğŸ“‹ â³ Waiting 12 seconds for system to process changes...\n   ğŸ” DEBUG: Monitors API response: {'monitors': [{'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 2, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:54', 'last_status': 1, 'name': 'Google Website Check', 'stop_to': 'stopTo', 'time_range_seconds': 600, 'type': 'ping_web', 'url_check': 'https://google.com', 'user_id': 1}, {'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 4, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:52', 'last_status': 1, 'name': 'SSL Certificate Check', 'stop_to': 'stopTo', 'time_range_seconds': 86400, 'type': 'ssl_expired_check', 'url_check': 'https://github.com', 'user_id': 1}, {'consecutive_errors': 1, 'count_offline': 2, 'count_online': 0, 'enabled': True, 'id': 5, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:59', 'last_status': -1, 'name': 'Web Content Check', 'stop_to': 'stopTo', 'time_range_seconds': 1800, 'type': 'web_content', 'url_check': 'https://httpbin.org/get', 'user_id': 2}], 'timestamp': '2025-09-27T08:35:18.021719', 'total': 3}\nğŸ“‹ After disable:\nğŸ“‹   ğŸ“Š Active threads: 3\nğŸ“‹   ğŸ“Š Enabled monitors: 3\nâœ… âœ… Monitor 1 removed from API (disabled successfully)\nâœ… âœ… Thread count decreased: 4 â†’ 3\nğŸ“‹ \nStep 3: Re-enabling monitor 1...\nğŸ“‹ Database: Monitor 1 enabled\nğŸ“‹ â³ Waiting 12 seconds for system to process changes...\n   ğŸ” DEBUG: Monitors API response: {'monitors': [{'consecutive_errors': 0, 'count_offline': 0, 'count_online': 3, 'enabled': True, 'id': 1, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:35:22', 'last_status': 1, 'name': 'Google DNS Check', 'stop_to': 'stopTo', 'time_range_seconds': 300, 'type': 'ping_icmp', 'url_check': '8.8.8.8', 'user_id': 1}, {'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 2, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:54', 'last_status': 1, 'name': 'Google Website Check', 'stop_to': 'stopTo', 'time_range_seconds': 600, 'type': 'ping_web', 'url_check': 'https://google.com', 'user_id': 1}, {'consecutive_errors': 0, 'count_offline': 0, 'count_online': 2, 'enabled': True, 'id': 4, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:52', 'last_status': 1, 'name': 'SSL Certificate Check', 'stop_to': 'stopTo', 'time_range_seconds': 86400, 'type': 'ssl_expired_check', 'url_check': 'https://github.com', 'user_id': 1}, {'consecutive_errors': 1, 'count_offline': 2, 'count_online': 0, 'enabled': True, 'id': 5, 'is_thread_running': True, 'last_check_time': '2025-09-27T08:34:59', 'last_status': -1, 'name': 'Web Content Check', 'stop_to': 'stopTo', 'time_range_seconds': 1800, 'type': 'web_content', 'url_check': 'https://httpbin.org/get', 'user_id': 2}], 'timestamp': '2025-09-27T08:35:34.173118', 'total': 4}\nğŸ“‹ After re-enable:\nğŸ“‹   ğŸ“Š Active threads: 4\nğŸ“‹   ğŸ“Š Enabled monitors: 4\nâœ… âœ… Monitor 1 re-enabled successfully in API\nâœ… âœ… Thread count maintained/increased: 3 â†’ 4\nâœ… âœ… System returned to initial state\nğŸ›‘ Stopping monitor service...\nâœ… Monitor service stopped\n\n================================================================================\nğŸ“Š DYNAMIC CONTROL TEST SUMMARY\n================================================================================\nâœ… Successes: 7\nâŒ Errors: 0\n\nğŸ‰ DYNAMIC CONTROL TEST PASSED!\nğŸ”„ Real-time monitor control working perfectly!\nğŸ•’ Test completed at: 2025-09-27 08:35:39\nâ±ï¸  Test duration: 53.59 seconds\n"
    },
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\06.test-webhook-alerts.py",
      "name": "06.test-webhook-alerts",
      "status": "PASSED",
      "successes": 14,
      "errors": 0,
      "duration": 143.97,
      "start_time": "2025-09-27 08:35:40",
      "end_time": "2025-09-27 08:38:04",
      "summary": "================================================================================\nâœ… Successes: 14\nâŒ Errors: 0",
      "error_messages": [
        "âŒ Errors: 0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ§ª Starting Webhook Alert Test...\nğŸ•’ Test started at: 2025-09-27 08:35:40\nğŸ§ª WEBHOOK ALERT TEST\nğŸ“¨ Testing webhook alert system\nğŸ•’ Test started at: 2025-09-27 08:35:40\n================================================================================\nğŸš€ Starting monitor service...\nâœ… Monitor service started successfully\n\n======================================================================\nğŸ“¨ WEBHOOK ALERT TEST\n======================================================================\nğŸ“‹ Step 0: Cleaning all existing monitors and configs...\nâœ… ğŸ§¹ Cleaned up ALL monitors and configs from database\nğŸ“‹ Step 1: Setting up test servers...\nğŸŒ Starting test web server on port 6000...\nâœ… Test web server started on port 6000\nğŸ“¨ Starting webhook server on port 6001...\nâœ… Webhook server started on port 6001\nğŸ“‹ Step 2: Setting up database with test data...\nâœ… âœ… Created test monitor with ID: 6\nğŸ“‹    URL: http://localhost:6000\nğŸ“‹    Interval: 10 seconds\nâœ… âœ… Created webhook config with ID: 4\nğŸ“‹    Webhook URL: http://localhost:6001/webhook\nâœ… Linked monitor 6 with config 4\nğŸ“‹ Step 3: Restarting monitor service to load new monitor...\nğŸ›‘ Stopping monitor service...\nâœ… Monitor service stopped\nğŸš€ Starting monitor service...\nâœ… Monitor service started successfully\nğŸ“‹ Step 4: Waiting for monitor to start checking...\nğŸ“‹ â³ Waiting 24 seconds for 2 monitor cycles...\nğŸ“‹ Webhook calls after normal operation: 0\nğŸ“‹ Step 5: Stopping test server to trigger alert...\nğŸ›‘ Stopping test web server on port 6000...\nâœ… Test web server stopped\nğŸ“‹ âœ… Confirmed: Server is not responding (as expected)\nğŸ“‹ Step 6: Waiting for alert webhook...\nğŸ“‹ â³ Waiting 72 seconds for 6 monitor cycles...\nğŸ“¨ Webhook received at 2025-09-27 08:37:30\n   Path: /webhook\n   Data: {\"timestamp\": \"2025-09-27T08:37:28.245955\", \"alert_type\": \"error\", \"service\": {\"name\": \"Test Webhook Monitor\", \"url\": \"http://localhost:6000\"}, \"message\": \"Connection error - cannot reach server (L\\u1ed7i li\\u00ean ti\\u1ebfp: 1)\", \"status\": \"down\", \"monitor_id\": 6, \"consecutive_errors\": 1, \"check_interval_seconds\": 10, \"webhook_name\": \"Test Webhook Config\"}\nğŸ“‹ ğŸ“Š Monitor Status (ID: 6):\nğŸ“‹     Name: Test Webhook Monitor\nğŸ“‹     Last Check Status: -1 (-1=error, 1=ok, NULL=not checked)\nğŸ“‹     Last Check Time: 2025-09-27 08:37:30\nğŸ“‹     Count Online: 3\nğŸ“‹     Count Offline: 1\nğŸ“‹ Final webhook calls received: 1\nğŸ“‹ New webhook calls: 1\nâœ… âœ… Webhook alert triggered! Received 1 webhook calls\nğŸ“‹ Webhook 1: 2025-09-27 08:37:30 - /webhook\nğŸ“‹   Body: {\"timestamp\": \"2025-09-27T08:37:28.245955\", \"alert_type\": \"error\", \"service\": {\"name\": \"Test Webhook Monitor\", \"url\": \"http://localhost:6000\"}, \"message\": \"Connection error - cannot reach server (L\\u1ed7i li\\u00ean ti\\u1ebfp: 1)\", \"status\": \"down\", \"monitor_id\": 6, \"consecutive_errors\": 1, \"check_interval_seconds\": 10, \"webhook_name\": \"Test Webhook Config\"}\nğŸ“‹ âœ… Test data cleanup (already done in cleanup_all_monitors_configs)\nğŸ›‘ Stopping test web server on port 6000...\nâœ… Test web server stopped\nğŸ›‘ Stopping webhook server on port 6001...\nâœ… Webhook server stopped\nğŸ›‘ Stopping monitor service...\nâœ… Monitor service stopped\n\n================================================================================\nğŸ“Š WEBHOOK ALERT TEST SUMMARY\n================================================================================\nâœ… Successes: 14\nâŒ Errors: 0\n\nğŸ‰ WEBHOOK ALERT TEST PASSED!\nğŸ“¨ Webhook alert system working perfectly!\nğŸ•’ Test completed at: 2025-09-27 08:38:04\nâ±ï¸  Test duration: 143.97 seconds\n"
    },
    {
      "file": "E:\\Projects\\monitor_2025\\tests\\07.test-telegram-alerts.py",
      "name": "07.test-telegram-alerts",
      "status": "PASSED",
      "successes": 15,
      "errors": 0,
      "duration": 138.85,
      "start_time": "2025-09-27 08:38:06",
      "end_time": "2025-09-27 08:40:25",
      "summary": "================================================================================\nâœ… Successes: 15\nâŒ Errors: 0",
      "error_messages": [
        "âŒ Errors: 0"
      ],
      "exit_code": 0,
      "raw_output": "ğŸ§ª Starting Telegram Alert Test...\nğŸ•’ Test started at: 2025-09-27 08:38:06\nâœ… âœ… Loaded Telegram config from E:\\Projects\\monitor_2025\\.env.telegram\nğŸ“‹    Bot Token: 8040174107:AAE-XqU-X...\nğŸ“‹    Chat ID: -4878499254\nğŸ§ª TELEGRAM ALERT TEST\nğŸ“± Testing telegram alert system\nğŸ•’ Test started at: 2025-09-27 08:38:06\n================================================================================\nğŸš€ Starting monitor service...\nâœ… Monitor service started successfully\n\n======================================================================\nğŸ“± TELEGRAM ALERT TEST\n======================================================================\nğŸ“‹ Step 0: Checking Telegram configuration...\nâœ… âœ… Telegram bot connection OK: @TaxiGlxLad1234567bot\nğŸ“‹ Step 1: Cleaning all existing monitors and configs...\nâœ… ğŸ§¹ Cleaned up ALL monitors and configs from database\nğŸ“‹ Step 2: Setting up test server...\nğŸŒ Starting test web server on port 6000...\nâœ… Test web server started on port 6000\nğŸ“‹ Step 3: Setting up database with test data...\nâœ… âœ… Created test monitor with ID: 7\nğŸ“‹    URL: http://localhost:6000\nğŸ“‹    Interval: 10 seconds\nâœ… âœ… Created telegram config with ID: 5\nğŸ“‹    Config: 8040174107:AAE-XqU-XaV0Y7v30pjZgbfGzHq88LQx0HQ,-48...\nâœ… âœ… Linked monitor 7 with config 5\nğŸ“‹ Step 4: Restarting monitor service to load new monitor...\nğŸ›‘ Stopping monitor service...\nâœ… Monitor service stopped\nğŸš€ Starting monitor service...\nâœ… Monitor service started successfully\nğŸ“‹ Step 5: Waiting for monitor to start checking...\nğŸ“‹ â³ Waiting 24 seconds for 2 monitor cycles...\nğŸ“‹ Monitor should be running normally now...\nğŸ“‹ Step 6: Stopping test server to trigger alert...\nğŸ›‘ Stopping test web server on port 6000...\nâœ… Test web server stopped\nğŸ“‹ Step 7: Waiting for Telegram alert...\nğŸ“‹ ğŸ“± Check your Telegram chat for alert messages!\nğŸ“‹ â³ Waiting 36 seconds for 3 monitor cycles...\nğŸ“‹ Step 8: Restarting test server to trigger recovery alert...\nğŸŒ Starting test web server on port 6000...\nâœ… Test web server started on port 6000\nğŸ“‹ Step 9: Waiting for Telegram recovery alert...\nğŸ“‹ ğŸ“± Check your Telegram chat for recovery message!\nğŸ“‹ â³ Waiting 36 seconds for 3 monitor cycles...\nâœ… âœ… Telegram alert test completed successfully!\nğŸ“‹ ğŸ“± Please check your Telegram chat for both alert and recovery messages\nğŸ“‹ âœ… Test data cleanup (already done in cleanup_all_monitors_configs)\nğŸ›‘ Stopping test web server on port 6000...\nâœ… Test web server stopped\nğŸ›‘ Stopping monitor service...\nâœ… Monitor service stopped\n\n================================================================================\nğŸ“Š TELEGRAM ALERT TEST SUMMARY\n================================================================================\nâœ… Successes: 15\nâŒ Errors: 0\n\nğŸ‰ TELEGRAM ALERT TEST PASSED!\nğŸ“± Telegram alert system working perfectly!\nğŸ•’ Test completed at: 2025-09-27 08:40:25\nâ±ï¸  Test duration: 138.85 seconds\n"
    }
  ]
}