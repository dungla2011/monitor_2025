# Linux-specific optimizations for monitor service
# Add these to your .env file for optimal Linux performance

# ===== THREAD POOL CONFIGURATION =====
# Reduce thread count for Linux systems with limited resources
MAX_WORKER_THREADS=30
MONITOR_QUEUE_SIZE=5000
TASK_TIMEOUT_SECONDS=180

# ===== LINUX MEMORY OPTIMIZATIONS =====
# Reduce cache refresh frequency to save memory
CACHE_REFRESH_INTERVAL=3
CACHE_EXPIRY_SECONDS=10

# ===== CONNECTION POOLING =====
# Reduce database connections for Linux
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5

# ===== NOTIFICATION THROTTLING =====
# Increased throttling for resource-constrained systems
TELEGRAM_THROTTLE_SECONDS=60
CONSECUTIVE_ERROR_THRESHOLD=5
EXTENDED_ALERT_INTERVAL_MINUTES=10

# ===== LOGGING OPTIMIZATIONS =====
# Reduce log verbosity to save disk I/O
LOG_LEVEL=WARNING
LOG_MAX_FILES=3
LOG_MAX_SIZE_MB=50

# ===== MONITORING INTERVALS =====
# Longer default intervals to reduce CPU usage
DEFAULT_CHECK_INTERVAL_SECONDS=600
MIN_CHECK_INTERVAL_SECONDS=120

# ===== SYSTEM RESOURCE LIMITS =====
# Set reasonable limits for Linux deployment
MAX_MONITORS_PER_INSTANCE=1000
MAX_CONCURRENT_CHECKS=20
SCHEDULER_CYCLE_SECONDS=10

# ===== CHUNK MODE FOR SCALING =====
# For 3000 monitors, use 3 instances with 1000 monitors each:
# Instance 1: --chunk=1-1000 (port 5005)
# Instance 2: --chunk=2-1000 (port 5006) 
# Instance 3: --chunk=3-1000 (port 5007)

# ===== LINUX ULIMIT RECOMMENDATIONS =====
# Add these to /etc/security/limits.conf or use ulimit commands:
# * soft nofile 65536
# * hard nofile 65536
# * soft nproc 32768
# * hard nproc 32768